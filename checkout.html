<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Seva Donation | Sri Vyasatirtha Vidyapeeta</title>
    <meta name="description" content="Complete your donation to support Vedic students and Annadana Seva.">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="checkstyle.css">
    <style>
        .item-price1 {
    font-size: 1.125rem;
    font-weight: 700;
    color: #7f1d1d;
}

.price-row.total {
    display: flex;
    justify-content: space-between;
    font-size: 1.125rem;
    font-weight: 700;
    color: #7f1d1d;}

    .price-breakdown {
    padding-bottom: 25px;
    padding-top: 6px;
}
    </style>
</head>
<body>
    <!-- Header -->
    <header class="checkout-header">
        <div class="container">
            <div class="d-flex align-items-center justify-content-between py-3">
                <a href="index.html" class="btn btn-link text-decoration-none">
                    <i class="bi bi-arrow-left"></i> Back to Home
                </a>
                <h1 class="header-title mb-0">Checkout</h1>
                <div style="width: 120px;"></div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="checkout-main">
        <div class="container py-5">
            <div class="row g-4">
                <!-- Left Column - Form -->
                <div class="col-lg-7">
                    <form id="checkoutForm" class="needs-validation" novalidate method="POST" action="saveDonation.php">

                        <input type="hidden" id="donation_details" name="donation_details">
                          <input type="hidden" id="total_amount" name="total_amount">
                        <!-- Personal Information -->
                        <div class="checkout-section">
                            <h2 class="section-title">
                                <i class="bi bi-person-circle"></i>
                                Personal Information
                            </h2>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="firstName" class="form-label">First Name <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" name="firstName" required>
                                    <div class="invalid-feedback">Please enter your first name.</div>
                                </div>
                                <div class="col-md-6">
                                    <label for="lastName" class="form-label">Last Name <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" name="lastName" required>
                                    <div class="invalid-feedback">Please enter your last name.</div>
                                </div>
                                <div class="col-md-6">
                                    <label for="email" class="form-label">Email Address <span class="text-danger">*</span></label>
                                    <input type="email" class="form-control" name="email" required>
                                    <div class="invalid-feedback">Please enter a valid email.</div>
                                </div>
                                <div class="col-md-6">
                                    <label for="phone" class="form-label">Phone Number <span class="text-danger">*</span></label>
                                    <input type="tel" class="form-control" name="phone" required>
                                    <div class="invalid-feedback">Please enter your phone number.</div>
                                </div>
                            </div>
                        </div>

                        <!-- Address Information -->
                        <!-- <div class="checkout-section">
                            <h2 class="section-title">
                                <i class="bi bi-geo-alt-fill"></i>
                                Address Information
                            </h2>
                            <div class="row g-3">
                                <div class="col-12">
                                    <label for="address" class="form-label">Street Address <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="address" required>
                                    <div class="invalid-feedback">Please enter your address.</div>
                                </div>
                                <div class="col-md-6">
                                    <label for="city" class="form-label">City <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="city" required>
                                    <div class="invalid-feedback">Please enter your city.</div>
                                </div>
                                <div class="col-md-6">
                                    <label for="state" class="form-label">State/Province <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="state" required>
                                    <div class="invalid-feedback">Please enter your state.</div>
                                </div>
                                <div class="col-md-6">
                                    <label for="zipCode" class="form-label">ZIP/Postal Code <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="zipCode" required>
                                    <div class="invalid-feedback">Please enter your ZIP code.</div>
                                </div>
                                <div class="col-md-6">
                                    <label for="country" class="form-label">Country <span class="text-danger">*</span></label>
                                    <select class="form-select" id="country" required>
                                        <option value="">Select Country</option>
                                        <option value="IN" selected>India</option>
                                        <option value="US">United States</option>
                                        <option value="GB">United Kingdom</option>
                                        <option value="CA">Canada</option>
                                        <option value="AU">Australia</option>
                                        <option value="OTHER">Other</option>
                                    </select>
                                    <div class="invalid-feedback">Please select your country.</div>
                                </div>
                            </div>
                        </div> -->

                        <!-- Payment Method -->
                        <div class="checkout-section">
                            <h2 class="section-title">
                                <i class="bi bi-credit-card-fill"></i>
                                Payment Method
                            </h2>
                            <div class="payment-methods">
                                <div class="payment-option">
                                    <input type="radio" class="btn-check" name="paymentMethod" id="upi" value="upi" checked>
                                    <label class="btn btn-payment" for="upi">
                                        <i class="bi bi-phone-fill"></i>
                                        <span>UPI</span>
                                    </label>
                                </div>
                                <div class="payment-option">
                                    <input type="radio" class="btn-check" name="paymentMethod" id="card" value="card">
                                    <label class="btn btn-payment" for="card">
                                        <i class="bi bi-credit-card"></i>
                                        <span>Credit/Debit Card</span>
                                    </label>
                                </div>
                                <div class="payment-option">
                                    <input type="radio" class="btn-check" name="paymentMethod" id="netbanking" value="netbanking">
                                    <label class="btn btn-payment" for="netbanking">
                                        <i class="bi bi-bank"></i>
                                        <span>Net Banking</span>
                                    </label>
                                </div>
                                <div class="payment-option">
                                    <input type="radio" class="btn-check" name="paymentMethod" id="wallet" value="wallet">
                                    <label class="btn btn-payment" for="wallet">
                                        <i class="bi bi-wallet2"></i>
                                        <span>Digital Wallet</span>
                                    </label>
                                </div>
                            </div>

                            <!-- UPI Details -->
                            <div id="upiDetails" class="payment-details mt-3">
                                <label for="upiId" class="form-label">UPI ID</label>
                                <input type="text" class="form-control" id="upiId" placeholder="yourname@upi">
                            </div>

                          

                            <!-- Net Banking Details -->
                            <div id="netbankingDetails" class="payment-details mt-3" style="display: none;">
                                <label for="bank" class="form-label">Select Your Bank</label>
                                <select class="form-select" id="bank">
                                    <option value="">Choose Bank</option>
                                    <option value="SBI">State Bank of India</option>
                                    <option value="HDFC">HDFC Bank</option>
                                    <option value="ICICI">ICICI Bank</option>
                                    <option value="AXIS">Axis Bank</option>
                                    <option value="PNB">Punjab National Bank</option>
                                    <option value="OTHER">Other</option>
                                </select>
                            </div>

                            <!-- Wallet Details -->
                            <div id="walletDetails" class="payment-details mt-3" style="display: none;">
                                <label for="walletType" class="form-label">Select Wallet</label>
                                <select class="form-select" id="walletType">
                                    <option value="">Choose Wallet</option>
                                    <option value="PAYTM">Paytm</option>
                                    <option value="PHONEPE">PhonePe</option>
                                    <option value="GOOGLEPAY">Google Pay</option>
                                    <option value="AMAZONPAY">Amazon Pay</option>
                                    <option value="OTHER">Other</option>
                                </select>
                            </div>
                        </div>

                        <!-- Additional Notes -->
                        <div class="checkout-section">
                            <h2 class="section-title">
                                <i class="bi bi-chat-left-text-fill"></i>
                                Additional Notes (Optional)
                            </h2>
                            <textarea class="form-control" id="notes" rows="3" placeholder="Any special instructions or dedications for your donation..."></textarea>
                        </div>

                      
                    
                </div>

                <!-- Right Column - Order Summary -->
                <div class="col-lg-5">
                    <div class="order-summary">
                        <h2 class="summary-title">
                            <i class="bi bi-cart-check-fill"></i>
                            Order Summary
                        </h2>

                        <!-- Order Items -->
                        <div class="order-items">
                            <div class="order-item" id="orderList">
                                
                            </div>
                           
                        </div>


                        <!-- Price Breakdown -->
                        <div class="price-breakdown">
                           
                            <div class="price-row total">
                                <span>Total Amount</span>
                                <span id="totalAmount"></span>
                            </div>
                        </div>

                     

                        <!-- Submit Button -->
                        <button type="button" class="btn btn-complete-donation" onclick="completeDonations()">
                            <i class="bi bi-shield-check"></i>
                            Complete Donations
                        </button>
                    </form>
                        <!-- Security Badge -->
                        <div class="security-badge">
                            <i class="bi bi-lock-fill"></i>
                            <span>Secure & Encrypted Payment</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Success Modal -->
   

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="checkscript.js"></script>
    <script>
        const orderList = document.getElementById("orderList");
        const totalAmount = document.getElementById("totalAmount");
        
        // Get data from localStorage
        const cardItems = JSON.parse(localStorage.getItem("checkoutItems"));
        const cardTotal = localStorage.getItem("checkoutTotal");
        const inputItem = JSON.parse(localStorage.getItem("checkoutItem"));
        
        // Clear previous content
        orderList.innerHTML = "";
        
        // 1️⃣ Show custom donation if exists
        if (inputItem) {
          const row = document.createElement("div");
          row.innerHTML = `
            <div class="item-info">${inputItem.desp}</div>
            <div class="item-price">₹${inputItem.amt}</div>
          `;
          orderList.appendChild(row);
        
          totalAmount.textContent = `₹${inputItem.amt}`;
        }
        
        // 2️⃣ Else show selected cards
        else if (cardItems && cardItems.length > 0) {
          cardItems.forEach(item => {
            const row = document.createElement("div");
            row.innerHTML = `
              <div class="item-info">${item.desc}</div>
              <div class="item-price">₹${item.amount}</div>
            `;
            orderList.appendChild(row);
          });
        
          totalAmount.textContent = `₹${cardTotal}`;
        }
        
        // 3️⃣ If nothing selected
        else {
          orderList.textContent = "No items to checkout.";
          totalAmount.textContent = "";
        }


function completeDonations() {

    const form = document.getElementById("checkoutForm");

    // ---- FORM VALIDATION ----
    if (!form.checkValidity()) {
        form.classList.add("was-validated");
        return; // stop submission if invalid
    }

    const cardItems = JSON.parse(localStorage.getItem("checkoutItems"));
    const inputItem = JSON.parse(localStorage.getItem("checkoutItem"));
    const cardTotal = localStorage.getItem("checkoutTotal");

    let details = "";

    if(inputItem){
        details = `${inputItem.desp} - ${inputItem.amt}`;
        document.getElementById("total_amount").value = inputItem.amt;
    } else if(cardItems){
        details = cardItems.map(item => `${item.desc} - ${item.amount}`).join(", ");
        document.getElementById("total_amount").value = cardTotal;
    }

    document.getElementById("donation_details").value = details;

    // Submit form AFTER validation success
    form.submit();

    // Clear stored values
    localStorage.clear();
}

</script>

        
        

    
</body>

</html>
